/**
 * Tower Defense - Map Data
 * Contains all 15 map layouts for story mode and other game modes
 */

// Map cell types: 0=buildable, 1=path, 2=start, 3=end, 4=obstacle, 5=special
export const MAPS = {
    // Chapter 1: The Invasion (Tutorial Plains)
    map_1: {
        id: 1,
        name: 'Tutorial Plains',
        chapter: 1,
        difficulty: 'easy',
        description: 'A simple straight path to learn the basics',
        cols: 20,
        rows: 15,
        startGold: 150,
        startLives: 20,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [2,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,3],
            [0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0],
            [0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0],
            [0,0,0,0,1,1,1,1,1,1,1,0,0,0,1,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ]
    },

    map_2: {
        id: 2,
        name: 'Forest Crossing',
        chapter: 1,
        difficulty: 'easy',
        description: 'A Y-shaped path with strategic placement opportunities',
        cols: 20,
        rows: 15,
        startGold: 150,
        startLives: 20,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [2,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,3],
            [0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [2,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ],
        startPoints: [{x: 0, y: 1}, {x: 0, y: 9}]
    },

    map_3: {
        id: 3,
        name: 'Desert Maze',
        chapter: 1,
        difficulty: 'medium',
        description: 'Boss level - Complex winding paths',
        cols: 20,
        rows: 15,
        startGold: 200,
        startLives: 25,
        bossLevel: true,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [2,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,0,0,0,1,0,0,0,0,0,0],
            [0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0],
            [0,0,0,0,0,1,0,0,0,1,1,1,1,1,0,0,0,0,0,0],
            [0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],
            [0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],
            [0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,3],
            [0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ]
    },

    // Chapter 2: The Wasteland (Maps 4-6)
    map_4: {
        id: 4,
        name: 'Frozen Canyon',
        chapter: 2,
        difficulty: 'medium',
        description: 'Parallel paths with narrow chokepoints',
        cols: 20,
        rows: 15,
        startGold: 175,
        startLives: 20,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [2,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,3],
            [0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0],
            [2,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,3],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ],
        startPoints: [{x: 0, y: 1}, {x: 0, y: 13}]
    },

    map_5: {
        id: 5,
        name: 'Ice Bridge',
        chapter: 2,
        difficulty: 'medium',
        description: 'Cross paths create strategic dilemmas',
        cols: 20,
        rows: 15,
        startGold: 175,
        startLives: 20,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [2,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,3],
            [0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,3],
            [0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],
            [2,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ],
        startPoints: [{x: 0, y: 1}, {x: 0, y: 13}]
    },

    map_6: {
        id: 6,
        name: 'Frostbite Peak',
        chapter: 2,
        difficulty: 'hard',
        description: 'Boss level - Treacherous mountain paths',
        cols: 20,
        rows: 15,
        startGold: 200,
        startLives: 25,
        bossLevel: true,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0],
            [0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0],
            [0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],
            [2,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,3],
            [0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],
            [0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0],
            [0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ]
    },

    // Chapter 3: The Fortress (Maps 7-9)
    map_7: {
        id: 7,
        name: 'Volcano Rim',
        chapter: 3,
        difficulty: 'hard',
        description: 'Circular path around a center island',
        cols: 20,
        rows: 15,
        startGold: 200,
        startLives: 18,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0],
            [0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0],
            [0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],
            [0,0,1,0,0,0,4,4,4,4,4,4,0,0,0,0,1,0,0,0],
            [0,1,0,0,0,0,4,0,0,0,0,4,0,0,0,0,0,1,0,0],
            [0,1,0,0,0,0,4,0,0,0,0,4,0,0,0,0,0,1,0,0],
            [2,1,0,0,0,0,4,0,0,0,0,4,0,0,0,0,0,1,3],
            [0,1,0,0,0,0,4,0,0,0,0,4,0,0,0,0,0,1,0,0],
            [0,1,0,0,0,0,4,0,0,0,0,4,0,0,0,0,0,1,0,0],
            [0,0,1,0,0,0,4,4,4,4,4,4,0,0,0,0,1,0,0,0],
            [0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],
            [0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ]
    },

    map_8: {
        id: 8,
        name: 'Lava Flows',
        chapter: 3,
        difficulty: 'hard',
        description: 'Multiple interweaving paths',
        cols: 20,
        rows: 15,
        startGold: 200,
        startLives: 18,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [2,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,3],
            [0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [2,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ],
        startPoints: [{x: 0, y: 1}, {x: 0, y: 10}]
    },

    map_9: {
        id: 9,
        name: 'Inferno Gate',
        chapter: 3,
        difficulty: 'hard',
        description: 'Boss level - The gates of fire',
        cols: 20,
        rows: 15,
        startGold: 225,
        startLives: 20,
        bossLevel: true,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0],
            [0,0,0,4,4,4,0,1,0,0,0,0,1,0,4,4,4,0,0,0],
            [0,0,0,4,0,4,1,0,0,0,0,0,0,1,4,0,4,0,0,0],
            [0,0,0,4,0,4,1,0,0,0,0,0,0,1,4,0,4,0,0,0],
            [0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0],
            [2,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,3],
            [0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0],
            [0,0,0,4,0,4,1,0,0,0,0,0,0,1,4,0,4,0,0,0],
            [0,0,0,4,0,4,1,0,0,0,0,0,0,1,4,0,4,0,0,0],
            [0,0,0,4,4,4,0,1,0,0,0,0,1,0,4,4,4,0,0,0],
            [0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ]
    },

    // Chapter 4: The Necropolis (Maps 10-12)
    map_10: {
        id: 10,
        name: 'Dark Swamp',
        chapter: 4,
        difficulty: 'very hard',
        description: 'Winding paths through hazardous terrain',
        cols: 20,
        rows: 15,
        startGold: 225,
        startLives: 15,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [2,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,3],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0],
            [2,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ],
        startPoints: [{x: 0, y: 1}, {x: 0, y: 9}]
    },

    map_11: {
        id: 11,
        name: 'Cursed Grounds',
        chapter: 4,
        difficulty: 'very hard',
        description: 'Spiral path with limited space',
        cols: 20,
        rows: 15,
        startGold: 250,
        startLives: 15,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
            [0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],
            [0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,0],
            [0,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0],
            [0,0,1,0,1,0,1,1,1,1,1,1,1,0,1,0,0,1,0,0],
            [0,0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,0,1,0,0],
            [3,1,1,0,1,0,1,0,4,4,4,0,1,0,1,0,0,1,1,2],
            [0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0],
            [0,0,0,0,1,0,1,1,1,1,1,1,1,0,1,0,0,0,0,0],
            [0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0],
            [0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ]
    },

    map_12: {
        id: 12,
        name: 'Tomb of Shadows',
        chapter: 4,
        difficulty: 'very hard',
        description: 'Boss level - The ancient necropolis',
        cols: 20,
        rows: 15,
        startGold: 275,
        startLives: 18,
        bossLevel: true,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0],
            [0,4,0,4,0,1,1,1,1,1,1,1,1,1,0,4,0,4,0,0],
            [0,4,4,4,0,1,0,0,0,0,0,0,0,1,0,4,4,4,0,0],
            [0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0],
            [0,0,0,0,0,1,0,0,4,4,4,0,0,1,0,0,0,0,0,0],
            [0,0,0,0,0,1,0,0,4,4,4,0,0,1,0,0,0,0,0,0],
            [2,1,1,1,1,1,0,0,4,4,4,0,0,1,1,1,1,1,1,3],
            [0,0,0,0,0,1,0,0,4,4,4,0,0,1,0,0,0,0,0,0],
            [0,0,0,0,0,1,0,0,4,4,4,0,0,1,0,0,0,0,0,0],
            [0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0],
            [0,4,4,4,0,1,0,0,0,0,0,0,0,1,0,4,4,4,0,0],
            [0,4,0,4,0,1,1,1,1,1,1,1,1,1,0,4,0,4,0,0],
            [0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ]
    },

    // Chapter 5: The Final Stand (Maps 13-15)
    map_13: {
        id: 13,
        name: 'Last Defense',
        chapter: 5,
        difficulty: 'extreme',
        description: 'The final confrontation begins',
        cols: 20,
        rows: 15,
        startGold: 300,
        startLives: 12,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [2,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,3],
            [0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],
            [0,0,0,1,1,1,1,0,0,0,0,0,1,1,1,1,0,0,0,0],
            [0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0],
            [0,0,0,1,1,1,1,0,0,0,0,0,1,1,1,1,0,0,0,0],
            [0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],
            [2,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,3],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ],
        startPoints: [{x: 0, y: 1}, {x: 0, y: 11}]
    },

    map_14: {
        id: 14,
        name: 'Chaos Realm',
        chapter: 5,
        difficulty: 'extreme',
        description: 'Reality breaks down',
        cols: 20,
        rows: 15,
        startGold: 350,
        startLives: 12,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [2,1,1,1,1,0,0,0,0,1,1,0,0,0,0,1,1,1,1,3],
            [0,0,0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0,0,0],
            [0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0],
            [0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,1,1,1,0,0,4,4,0,0,0,1,1,1,0,0,0],
            [0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0],
            [0,0,0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0,0,0],
            [2,1,1,1,1,0,0,0,0,1,1,0,0,0,0,1,1,1,1,3],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ],
        startPoints: [{x: 0, y: 1}, {x: 0, y: 10}]
    },

    map_15: {
        id: 15,
        name: 'The Final Stand',
        chapter: 5,
        difficulty: 'extreme',
        description: 'Boss level - The ultimate battle',
        cols: 20,
        rows: 15,
        startGold: 400,
        startLives: 15,
        bossLevel: true,
        finalBoss: true,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,4,4,4,4,4,0,0,0,0,4,4,4,4,4,0,0,0],
            [0,0,0,4,0,0,0,4,0,1,1,0,4,0,0,0,4,0,0,0],
            [0,0,0,4,0,0,0,4,1,0,0,1,4,0,0,0,4,0,0,0],
            [0,0,0,4,0,0,0,1,0,0,0,0,1,0,0,0,4,0,0,0],
            [0,0,0,4,0,0,1,0,0,0,0,0,0,1,0,0,4,0,0,0],
            [0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0],
            [2,1,1,1,1,1,0,0,0,4,4,0,0,0,1,1,1,1,1,3],
            [0,0,0,0,0,1,0,0,0,4,4,0,0,0,1,0,0,0,0,0],
            [0,0,0,4,0,0,1,0,0,0,0,0,0,1,0,0,4,0,0,0],
            [0,0,0,4,0,0,0,1,0,0,0,0,1,0,0,0,4,0,0,0],
            [0,0,0,4,0,0,0,4,1,0,0,1,4,0,0,0,4,0,0,0],
            [0,0,0,4,0,0,0,4,0,1,1,0,4,0,0,0,4,0,0,0],
            [0,0,0,4,4,4,4,4,0,0,0,0,4,4,4,4,4,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ]
    },

    // ============================================
    // ADVANCED MAPS - Complex Layouts for Endless/Challenge
    // ============================================
    
    // Advanced Map 1: Spiral Fortress
    map_16: {
        id: 16,
        name: 'Spiral Fortress',
        chapter: 6,
        difficulty: 'advanced',
        description: 'A spiraling path around a fortified center',
        cols: 20,
        rows: 15,
        startGold: 200,
        startLives: 15,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],
            [0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,0],
            [0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0],
            [0,0,1,0,0,1,1,1,1,1,1,1,0,0,1,0,0,1,0,0],
            [0,0,1,0,0,1,0,4,4,4,0,1,0,0,1,0,0,1,0,0],
            [0,0,1,0,0,1,0,4,4,4,0,1,0,0,1,0,0,1,0,0],
            [0,0,1,0,0,1,0,4,4,4,0,1,0,0,1,0,0,1,0,0],
            [0,0,1,0,0,1,1,1,1,1,1,1,0,0,1,0,0,1,0,0],
            [0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0],
            [0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,3]
        ]
    },

    // Advanced Map 2: Double Helix
    map_17: {
        id: 17,
        name: 'Double Helix',
        chapter: 6,
        difficulty: 'advanced',
        description: 'Two intertwining paths that cross multiple times',
        cols: 20,
        rows: 15,
        startGold: 225,
        startLives: 15,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [2,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,3],
            [0,0,0,1,1,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0],
            [0,0,0,0,0,1,1,1,0,0,0,0,1,1,1,0,0,0,0,0],
            [0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0],
            [0,0,0,0,0,1,1,1,0,0,0,0,1,1,1,0,0,0,0,0],
            [0,0,0,1,1,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0],
            [2,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,3],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ],
        startPoints: [{x: 0, y: 1}, {x: 0, y: 10}]
    },

    // Advanced Map 3: Maze of Madness
    map_18: {
        id: 18,
        name: 'Maze of Madness',
        chapter: 6,
        difficulty: 'advanced',
        description: 'A true maze with dead ends and tight corners',
        cols: 20,
        rows: 15,
        startGold: 250,
        startLives: 12,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [2,1,1,1,1,1,0,1,1,1,1,1,1,0,1,1,1,1,1,3],
            [0,0,0,0,0,1,0,1,0,0,0,0,1,0,1,0,0,0,0,0],
            [0,1,1,1,0,1,0,1,0,1,1,0,1,0,1,0,1,1,1,0],
            [0,1,0,1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,1,0],
            [0,1,0,1,1,1,0,1,1,1,0,0,1,1,1,0,1,0,1,0],
            [0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0],
            [0,1,1,1,1,1,0,1,1,1,1,1,1,0,1,1,1,0,1,0],
            [0,0,0,0,0,1,0,1,0,0,0,0,1,0,1,0,0,0,1,0],
            [0,1,1,1,0,1,0,1,0,4,4,0,1,0,1,0,1,1,1,0],
            [0,1,0,1,0,1,0,1,0,4,4,0,1,0,1,0,1,0,0,0],
            [0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],
            [0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ]
    },

    // Advanced Map 4: Crossroads
    map_19: {
        id: 19,
        name: 'Crossroads',
        chapter: 6,
        difficulty: 'advanced',
        description: 'Four paths converge at a central junction',
        cols: 20,
        rows: 15,
        startGold: 275,
        startLives: 12,
        grid: [
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
            [2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3],
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,4,4,0,0,0,1,1,0,0,0,4,4,0,0,0,0],
            [0,0,0,0,4,4,0,0,0,1,1,0,0,0,4,4,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,4,4,0,0,0,1,1,0,0,0,4,4,0,0,0,0],
            [0,0,0,0,4,4,0,0,0,1,1,0,0,0,4,4,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
            [2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3],
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0]
        ],
        startPoints: [{x: 0, y: 3}, {x: 0, y: 11}]
    },

    // Advanced Map 5: Figure Eight
    map_20: {
        id: 20,
        name: 'Figure Eight',
        chapter: 6,
        difficulty: 'expert',
        description: 'An infinity loop with crossing paths',
        cols: 20,
        rows: 15,
        startGold: 250,
        startLives: 10,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,0,0,0],
            [0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0],
            [0,1,0,0,4,4,0,0,0,1,1,0,0,0,4,4,0,0,1,0],
            [2,1,0,0,4,4,0,0,0,1,1,0,0,0,4,4,0,0,1,3],
            [0,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,0],
            [0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0],
            [0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,0,0,0],
            [0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0],
            [0,0,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0],
            [0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],
            [0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],
            [0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ]
    },

    // Advanced Map 6: The Gauntlet
    map_21: {
        id: 21,
        name: 'The Gauntlet',
        chapter: 6,
        difficulty: 'expert',
        description: 'Run the gauntlet through narrow corridors',
        cols: 20,
        rows: 15,
        startGold: 300,
        startLives: 10,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [2,1,1,0,0,4,0,0,0,4,0,0,0,4,0,0,0,4,1,3],
            [0,0,1,0,0,4,0,0,0,4,0,0,0,4,0,0,0,4,1,0],
            [0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [0,0,0,0,0,4,0,0,0,4,0,0,0,4,0,0,0,4,1,0],
            [0,0,0,0,0,4,0,0,0,4,0,0,0,4,0,0,0,4,1,0],
            [0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [0,0,1,0,0,4,0,0,0,4,0,0,0,4,0,0,0,0,0,0],
            [0,0,1,0,0,4,0,0,0,4,0,0,0,4,0,0,0,0,0,0],
            [0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [0,0,0,0,0,4,0,0,0,4,0,0,0,4,0,0,0,4,1,0],
            [0,0,0,0,0,4,0,0,0,4,0,0,0,4,0,0,0,4,1,0],
            [0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [2,1,1,0,0,4,0,0,0,4,0,0,0,4,0,0,0,4,1,3],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ],
        startPoints: [{x: 0, y: 1}, {x: 0, y: 13}]
    },

    // Advanced Map 7: Pinwheel
    map_22: {
        id: 22,
        name: 'Pinwheel',
        chapter: 6,
        difficulty: 'expert',
        description: 'Four rotating arms converge at center',
        cols: 20,
        rows: 15,
        startGold: 300,
        startLives: 8,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,1,0,0,4,4,0,0,1,0,0,0,0,0,0],
            [0,0,0,0,0,1,0,0,0,4,4,0,0,0,1,0,0,0,0,0],
            [0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],
            [2,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,3],
            [0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],
            [0,0,0,0,0,1,0,0,0,4,4,0,0,0,1,0,0,0,0,0],
            [0,0,0,0,0,0,1,0,0,4,4,0,0,1,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ]
    },

    // Advanced Map 8: Star Pattern
    map_23: {
        id: 23,
        name: 'Star Pattern',
        chapter: 6,
        difficulty: 'master',
        description: 'A complex star-shaped path network',
        cols: 20,
        rows: 15,
        startGold: 350,
        startLives: 8,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0],
            [0,0,1,1,1,1,1,1,0,4,4,0,1,1,1,1,1,1,0,0],
            [0,0,1,0,0,0,0,0,1,4,4,1,0,0,0,0,0,1,0,0],
            [0,0,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,0,0],
            [2,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,3],
            [0,0,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,0,0],
            [0,0,1,0,0,0,0,0,1,4,4,1,0,0,0,0,0,1,0,0],
            [0,0,1,1,1,1,1,1,0,4,4,0,1,1,1,1,1,1,0,0],
            [0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ]
    },

    // Advanced Map 9: The Labyrinth
    map_24: {
        id: 24,
        name: 'The Labyrinth',
        chapter: 6,
        difficulty: 'master',
        description: 'Get lost in this complex maze',
        cols: 20,
        rows: 15,
        startGold: 400,
        startLives: 6,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],
            [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0],
            [0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0],
            [0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0],
            [0,1,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0],
            [0,1,0,1,0,1,1,1,1,1,1,1,1,0,1,0,1,0,1,0],
            [0,1,0,1,0,1,0,0,0,4,4,0,1,0,1,0,1,0,1,0],
            [0,1,0,1,0,1,1,1,1,1,1,1,1,0,1,0,1,0,1,0],
            [0,1,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0],
            [0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0],
            [0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0],
            [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3]
        ]
    },

    // Advanced Map 10: Ultimate Challenge
    map_25: {
        id: 25,
        name: 'Ultimate Challenge',
        chapter: 6,
        difficulty: 'legendary',
        description: 'The ultimate test of tower defense mastery',
        cols: 20,
        rows: 15,
        startGold: 500,
        startLives: 5,
        bossLevel: true,
        finalBoss: true,
        grid: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [2,1,1,0,0,4,4,4,0,0,0,0,4,4,4,0,0,1,1,3],
            [0,0,1,0,0,4,0,4,0,1,1,0,4,0,4,0,0,1,0,0],
            [0,0,1,1,1,1,0,1,1,0,0,1,1,0,1,1,1,1,0,0],
            [0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0],
            [0,1,1,1,1,1,0,4,4,4,4,4,4,0,1,1,1,1,1,0],
            [0,1,0,0,0,0,0,4,0,0,0,0,4,0,0,0,0,0,1,0],
            [0,1,0,4,4,1,1,1,0,4,4,0,1,1,1,4,4,0,1,0],
            [0,1,0,0,0,0,0,4,0,0,0,0,4,0,0,0,0,0,1,0],
            [0,1,1,1,1,1,0,4,4,4,4,4,4,0,1,1,1,1,1,0],
            [0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0],
            [0,0,1,1,1,1,0,1,1,0,0,1,1,0,1,1,1,1,0,0],
            [0,0,1,0,0,4,0,4,0,1,1,0,4,0,4,0,0,1,0,0],
            [2,1,1,0,0,4,4,4,0,0,0,0,4,4,4,0,0,1,1,3],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        ],
        startPoints: [{x: 0, y: 1}, {x: 0, y: 13}]
    }
};

// Helper function to get map by ID
export function getMap(mapId) {
    return MAPS[`map_${mapId}`];
}

// Helper function to get maps by chapter
export function getChapterMaps(chapter) {
    return Object.values(MAPS).filter(map => map.chapter === chapter);
}

// Helper function to get all boss levels
export function getBossLevels() {
    return Object.values(MAPS).filter(map => map.bossLevel);
}

// Calculate path from map grid
export function calculatePath(grid) {
    const rows = grid.length;
    const cols = grid[0].length;
    const CELL_SIZE = 32;
    
    // Find all start points (value 2)
    const startPoints = [];
    for (let y = 0; y < rows; y++) {
        for (let x = 0; x < cols; x++) {
            if (grid[y][x] === 2) {
                startPoints.push({x, y});
            }
        }
    }
    
    // If no explicit start points, assume top-left corner
    if (startPoints.length === 0) {
        startPoints.push({x: 0, y: 0});
    }
    
    const paths = [];
    
    // Calculate path for each start point
    for (const start of startPoints) {
        const path = [];
        let x = start.x;
        let y = start.y;
        
        const visited = new Set();
        visited.add(`${x},${y}`);
        path.push({ 
            x: x * CELL_SIZE + CELL_SIZE / 2, 
            y: y * CELL_SIZE + CELL_SIZE / 2 
        });
        
        // Follow path until we reach end (value 3)
        while (grid[y][x] !== 3) {
            const directions = [[1, 0], [-1, 0], [0, 1], [0, -1]];
            let found = false;
            
            for (const [dx, dy] of directions) {
                const nx = x + dx;
                const ny = y + dy;
                const key = `${nx},${ny}`;
                
                if (nx >= 0 && nx < cols && ny >= 0 && ny < rows &&
                    (grid[ny][nx] === 1 || grid[ny][nx] === 3) && !visited.has(key)) {
                    x = nx;
                    y = ny;
                    visited.add(key);
                    path.push({ 
                        x: x * CELL_SIZE + CELL_SIZE / 2, 
                        y: y * CELL_SIZE + CELL_SIZE / 2 
                    });
                    found = true;
                    break;
                }
            }
            
            if (!found) break; // Dead end or invalid path
        }
        
        paths.push(path);
    }
    
    // Return the first path (or combine them for multi-path support later)
    return paths[0] || [];
}
