(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[97],{9714:function(e,t,r){Promise.resolve().then(r.bind(r,1168))},1168:function(e,t,r){"use strict";r.d(t,{GameClient:function(){return m}});var a=r(7437),s=r(9376),n=r(2265),i=r(6921),o=r(3820),c=r(9763);let l=(0,c.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),d=(0,c.Z)("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);var u=r(2869);function m(e){let{gameId:t}=e,r=(0,s.useRouter)(),{allGames:c}=(0,i.e)(),{user:m}=(0,o.tN)(),{setHighScore:f}=(0,o.gT)(),[h,p]=(0,n.useState)(!0),g=c.find(e=>e.id===t);(0,n.useEffect)(()=>{let e=e=>{switch(e.data.type){case"GAME_SCORE":e.data.score&&f(t,e.data.score);break;case"GAME_EXIT":r.push("/hub/");break;case"GAME_READY":p(!1)}};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[t,r,f]);let b=(0,n.useCallback)(()=>{r.push("/hub/")},[r]),y=(0,n.useCallback)(()=>{let e=document.querySelector("iframe");e&&e.requestFullscreen()},[]);return g?(0,a.jsxs)("div",{className:"fixed inset-0 bg-background z-50",children:[(0,a.jsxs)("div",{className:"absolute top-0 left-0 right-0 h-14 bg-surface/90 backdrop-blur border-b border-white/[0.05] flex items-center justify-between px-4 z-10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(u.z,{variant:"ghost",size:"icon",onClick:b,children:(0,a.jsx)(l,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"font-display text-sm font-bold uppercase tracking-wider text-primary",children:g.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Press ESC to exit"})]})]}),(0,a.jsx)(u.z,{variant:"ghost",size:"icon",onClick:y,children:(0,a.jsx)(d,{className:"w-5 h-5"})})]}),h&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-background z-20",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 border-2 border-accent border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsxs)("p",{className:"text-muted-foreground font-display uppercase tracking-wider",children:["Loading ",g.name,"..."]})]})}),(0,a.jsx)("iframe",{src:g.path,className:"w-full h-full pt-14 border-0",allow:"fullscreen",sandbox:"allow-scripts allow-same-origin allow-popups",onLoad:()=>{p(!1);let e=document.querySelector("iframe");(null==e?void 0:e.contentWindow)&&e.contentWindow.postMessage({type:"INIT_GAME",userId:(null==m?void 0:m.id)||"guest",username:(null==m?void 0:m.displayName)||"Guest"},"*")}})]}):(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"font-display text-2xl font-bold text-primary mb-4",children:"Game Not Found"}),(0,a.jsx)(u.z,{onClick:b,children:"Go Back"})]})})}},2869:function(e,t,r){"use strict";r.d(t,{z:function(){return i}});var a=r(7437),s=r(2265),n=r(4508);let i=s.forwardRef((e,t)=>{let{className:r,variant:s="default",size:i="default",isLoading:o=!1,children:c,...l}=e;return(0,a.jsx)("button",{className:(0,n.cn)("inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium uppercase tracking-wider transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-accent disabled:pointer-events-none disabled:opacity-50",{default:"bg-accent-dim border border-accent-border text-accent hover:bg-accent/20 hover:border-accent",primary:"bg-accent text-background hover:bg-accent/90 border border-accent",secondary:"bg-elevated border border-white/[0.08] text-primary hover:bg-raised hover:border-white/[0.12]",ghost:"hover:bg-elevated hover:text-primary text-muted-foreground",danger:"bg-danger/10 border border-danger/30 text-danger hover:bg-danger/20 hover:border-danger/50",outline:"border border-white/[0.08] bg-transparent hover:bg-elevated hover:text-primary"}[s],{default:"h-9 px-4 py-2",sm:"h-8 px-3 text-xs",lg:"h-11 px-8 text-base",icon:"h-9 w-9"}[i],o&&"opacity-70 cursor-wait",r),ref:t,disabled:l.disabled||o,...l,children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):c})});i.displayName="Button"},6921:function(e,t,r){"use strict";r.d(t,{e:function(){return i}});var a=r(2265),s=r(3820);let n=[{id:"snake",name:"Snake",description:"Eat food, grow longer, avoid walls",icon:"Gamepad2",difficulty:"easy",category:"classic",path:"/games/snake/"},{id:"pacman",name:"Pac-Man",description:"Navigate mazes, eat dots, avoid ghosts",icon:"Ghost",difficulty:"medium",category:"arcade",path:"/games/pacman/"},{id:"tetris",name:"Tetris",description:"Stack blocks to clear lines",icon:"Grid3x3",difficulty:"medium",category:"puzzle",path:"/games/tetris/"},{id:"breakout",name:"Breakout",description:"Smash bricks with a ball",icon:"Square",difficulty:"easy",category:"arcade",path:"/games/breakout/"},{id:"asteroids",name:"Asteroids",description:"Blast asteroids in space",icon:"Sparkles",difficulty:"hard",category:"shooter",path:"/games/asteroids/"},{id:"minesweeper",name:"Minesweeper",description:"Clear the minefield",icon:"Bomb",difficulty:"hard",category:"puzzle",path:"/games/minesweeper/"},{id:"2048",name:"2048",description:"Merge tiles to reach 2048",icon:"Calculator",difficulty:"medium",category:"puzzle",path:"/games/2048/"},{id:"tictactoe",name:"Tic Tac Toe",description:"Classic X and O game",icon:"Circle",difficulty:"easy",category:"strategy",path:"/games/tictactoe/"}];function i(){let{games:e,filter:t,highScores:r,setGames:i,setFilter:o}=(0,s.gT)();return(0,a.useEffect)(()=>{i(n.map(e=>({...e,highScore:r[e.id]||0})))},[]),{games:(0,a.useMemo)(()=>"all"===t?e:e.filter(e=>e.difficulty===t),[e,t]),allGames:e,filter:t,setFilter:o}}},4257:function(e,t,r){"use strict";r.d(t,{xI:function(){return f},yL:function(){return m}});var a=r(738),s=r(4752),n=r(5978);r(6834);let i={apiKey:"AIzaSyCumtfvMCnSRXMHtOghgLv87PdvmwD3yjA".trim(),authDomain:"arcade-7f03c.firebaseapp.com".trim(),projectId:"arcade-7f03c".trim(),storageBucket:"arcade-7f03c.firebasestorage.app".trim(),messagingSenderId:"883884342768".trim(),appId:"1:883884342768:web:8c6a43c1c3c01790d2f135".trim(),measurementId:"G-NCQBGH5RR3".trim()},o=null,c=null,l=null,d=null;async function u(){return o&&c?{app:o,auth:c,db:l}:d||(d=(async()=>{try{if(0===(0,a.C6)().length){if(!i.apiKey||"undefined"===i.apiKey)return{app:null,auth:null,db:null};o=(0,a.ZF)(i)}else o=(0,a.C6)()[0];return c=(0,s.v0)(o),await (0,s.Fb)(c,s.a$),l=(0,n.ad)(o),{app:o,auth:c,db:l}}catch(e){return{app:null,auth:null,db:null}}})())}async function m(){if(c)return c;let{auth:e}=await u();return e}async function f(){if(l)return l;let{db:e}=await u();return e}},3820:function(e,t,r){"use strict";r.d(t,{tN:function(){return n},gT:function(){return i},Pl:function(){return m},ev:function(){return o}});var a=r(9625),s=r(6885);let n=(0,a.Ue)()((0,s.tJ)(e=>({user:null,isLoading:!0,isAuthenticated:!1,setUser:t=>e({user:t,isAuthenticated:!!t,isLoading:!1}),setLoading:t=>e({isLoading:t}),signOut:()=>e({user:null,isAuthenticated:!1,isLoading:!1}),updateProfile:t=>e(e=>({user:e.user?{...e.user,...t}:null})),updatePreferences:t=>e(e=>({user:e.user?{...e.user,preferences:{...e.user.preferences,...t}}:null}))}),{name:"auth-storage",partialize:e=>({user:e.user})})),i=(0,a.Ue)()(e=>({games:[],filter:"all",highScores:{},setGames:t=>e({games:t}),setFilter:t=>e({filter:t}),setHighScore:(t,r)=>e(e=>({highScores:{...e.highScores,[t]:Math.max(e.highScores[t]||0,r)}}))})),o=(0,a.Ue)()((e,t)=>({currentParty:null,isInParty:!1,messages:[],isDrawerOpen:!1,createParty:async()=>{let t=Math.random().toString(36).substring(2,8).toUpperCase();e({currentParty:{id:crypto.randomUUID(),code:t,hostId:"current-user",members:[],status:"waiting",createdAt:new Date},isInParty:!0})},joinParty:async e=>{},leaveParty:()=>{e({currentParty:null,isInParty:!1,messages:[]})},sendMessage:r=>{let{currentParty:a}=t();if(!a)return;let s={id:crypto.randomUUID(),userId:"current-user",displayName:"You",text:r,timestamp:new Date};e(e=>({messages:[...e.messages,s]}))},addMember:t=>{e(e=>({currentParty:e.currentParty?{...e.currentParty,members:[...e.currentParty.members,t]}:null}))},removeMember:t=>{e(e=>({currentParty:e.currentParty?{...e.currentParty,members:e.currentParty.members.filter(e=>e.userId!==t)}:null}))},setDrawerOpen:t=>e({isDrawerOpen:t})}));var c=r(5978),l=r(4257);let d="userStats",u={getLeaderboard:async function(e){let t,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,s=arguments.length>2?arguments[2]:void 0,n=await (0,l.xI)();if(!n)throw Error("Firebase not initialized");let i=(0,c.hJ)(n,d);t="global"===e?s?(0,c.IO)(i,(0,c.Xo)("bestScore","desc"),(0,c.TQ)(s),(0,c.b9)(a)):(0,c.IO)(i,(0,c.Xo)("bestScore","desc"),(0,c.b9)(a)):s?(0,c.IO)(i,(0,c.ar)("gameId","==",e),(0,c.Xo)("bestScore","desc"),(0,c.TQ)(s),(0,c.b9)(a)):(0,c.IO)(i,(0,c.ar)("gameId","==",e),(0,c.Xo)("bestScore","desc"),(0,c.b9)(a));let o=await (0,c.PL)(t),u=Array.from(new Set(o.docs.map(e=>e.data().userId))),m={};for(let e=0;e<u.length;e+=10){let t=u.slice(e,e+10),r=(0,c.IO)((0,c.hJ)(n,"users"),(0,c.ar)("__name__","in",t));(await (0,c.PL)(r)).docs.forEach(e=>{let t=e.data();m[e.id]={displayName:t.displayName||"Anonymous",avatar:t.avatar||"User",photoURL:t.photoURL}})}let f=[],h=1;for(let e of o.docs){var p;let t=e.data(),a=m[t.userId]||{displayName:"Anonymous",avatar:"User"};f.push({rank:s?h+50:h,userId:t.userId,displayName:a.displayName,avatar:a.avatar,photoURL:a.photoURL,score:t.bestScore,timestamp:(null===(p=t.lastPlayed)||void 0===p?void 0:p.toDate())||new Date}),h++,r=t.bestScore}return{entries:f,lastScore:r}},getUserRank:async(e,t)=>{let r;let a=await (0,l.xI)();if(!a)throw Error("Firebase not initialized");let s=(0,c.hJ)(a,d);r="global"===t?(0,c.IO)(s,(0,c.Xo)("bestScore","desc")):(0,c.IO)(s,(0,c.ar)("gameId","==",t),(0,c.Xo)("bestScore","desc"));let n=await (0,c.PL)(r),i=1;for(let t of n.docs){if(t.data().userId===e)return i;i++}return null}},m=(0,a.Ue)()(e=>({entries:[],currentUserRank:null,selectedGame:"global",isLoading:!1,error:null,setEntries:t=>e({entries:t}),setCurrentUserRank:t=>e({currentUserRank:t}),setSelectedGame:t=>e({selectedGame:t}),setIsLoading:t=>e({isLoading:t}),fetchLeaderboard:async(t,r)=>{e({isLoading:!0,error:null});try{let a=await u.getLeaderboard(t,50);if(e({entries:a.entries,isLoading:!1}),r){let a=await u.getUserRank(r,t);e({currentUserRank:a})}}catch(t){e({error:"Failed to load leaderboard",isLoading:!1,entries:[]})}}}))},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(1994),s=r(3335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[358,533,24,971,117,744],function(){return e(e.s=9714)}),_N_E=e.O()}]);