(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[670],{9849:function(e,t,a){Promise.resolve().then(a.bind(a,1832))},1832:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return S}});var r=a(7437),i=a(2265),s=a(9763);let c=(0,s.Z)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);var n=a(2222);let l=(0,s.Z)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);var o=a(6595);let d=(0,s.Z)("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);var u=a(8617),p=a(1239);let m=(0,s.Z)("Clover",[["path",{d:"M16.17 7.83 2 22",key:"t58vo8"}],["path",{d:"M4.02 12a2.827 2.827 0 1 1 3.81-4.17A2.827 2.827 0 1 1 12 4.02a2.827 2.827 0 1 1 4.17 3.81A2.827 2.827 0 1 1 19.98 12a2.827 2.827 0 1 1-3.81 4.17A2.827 2.827 0 1 1 12 19.98a2.827 2.827 0 1 1-4.17-3.81A1 1 0 1 1 4 12",key:"17k36q"}],["path",{d:"m7.83 7.83 8.34 8.34",key:"1d7sxk"}]]);var x=a(9232),h=a(401),y=a(4508),f=a(2869),g=a(8079),v=a(5978),b=a(4257);let w="shopItems",k="userInventory",j=[{id:"avatar-cyber",name:"Cyber Avatar",description:"A futuristic cyberpunk avatar",icon:"UserCircle",price:100,category:"avatar",rarity:"rare",active:!0},{id:"avatar-ninja",name:"Ninja Avatar",description:"Stealthy ninja avatar",icon:"UserCircle",price:150,category:"avatar",rarity:"epic",active:!0},{id:"avatar-robot",name:"Robot Avatar",description:"Cute robot avatar",icon:"Bot",price:200,category:"avatar",rarity:"legendary",active:!0},{id:"theme-neon",name:"Neon Theme",description:"Cyberpunk neon color scheme",icon:"Palette",price:150,category:"theme",rarity:"rare",active:!0},{id:"theme-retro",name:"Retro Theme",description:"Classic arcade colors",icon:"Palette",price:100,category:"theme",rarity:"common",active:!0},{id:"theme-ocean",name:"Ocean Theme",description:"Deep blue ocean colors",icon:"Palette",price:150,category:"theme",rarity:"rare",active:!0},{id:"badge-star",name:"Star Badge",description:"Show off your star status",icon:"Star",price:50,category:"badge",rarity:"common",active:!0},{id:"badge-fire",name:"Fire Badge",description:"You're on fire!",icon:"Flame",price:75,category:"badge",rarity:"rare",active:!0},{id:"badge-crown",name:"Crown Badge",description:"Royalty status",icon:"Crown",price:150,category:"badge",rarity:"epic",active:!0},{id:"powerup-double-xp",name:"Double XP (1 Day)",description:"Earn 2x XP for 24 hours",icon:"Zap",price:100,category:"powerup",rarity:"rare",active:!0},{id:"powerup-lucky",name:"Lucky Charm",description:"50% bonus coins for 1 day",icon:"Clover",price:80,category:"powerup",rarity:"common",active:!0}],N={initializeShop:async()=>{let e=await (0,b.xI)();if(!e)return;let t=(0,v.hJ)(e,w);for(let e of j){let a=(0,v.JU)(t,e.id);(await (0,v.QT)(a)).exists()||await (0,v.pl)(a,e)}},getShopItems:async()=>{let e=await (0,b.xI)();if(!e)return j.filter(e=>e.active);await N.initializeShop();let t=(0,v.hJ)(e,w),a=(0,v.IO)(t);return(await (0,v.PL)(a)).docs.map(e=>{let t=e.data();return{id:e.id,name:t.name,description:t.description,icon:t.icon,price:t.price,category:t.category,rarity:t.rarity,active:t.active}}).filter(e=>e.active)},getItemsByCategory:async e=>(await N.getShopItems()).filter(t=>t.category===e),getUserInventory:async e=>{let t=await (0,b.xI)();if(!t)return{items:[],equipped:{}};let a=(0,v.JU)(t,k,e),r=await (0,v.QT)(a);if(r.exists())return r.data();let i={items:[],equipped:{}};return await (0,v.pl)(a,i),i},purchaseItem:async(e,t)=>{let a=await (0,b.xI)();if(!a)return{success:!1,error:"Database not available"};let r=(0,v.JU)(a,w,t),i=(0,v.JU)(a,"users",e),s=(0,v.JU)(a,k,e);try{return await (0,v.i3)(a,async e=>{let a=await e.get(r),c=await e.get(i),n=await e.get(s);if(!a.exists())return{success:!1,error:"Item not found"};let l=a.data();if(!l.active)return{success:!1,error:"Item not available"};if((n.exists()?n.data():{items:[],equipped:{}}).items.includes(t))return{success:!1,error:"Item already owned"};let o=(c.exists()?c.data():{}).coins||0;return o<l.price?{success:!1,error:"Not enough coins"}:(e.update(i,{coins:o-l.price,updatedAt:(0,v.Bt)()}),n.exists()?e.update(s,{items:(0,v.vr)(t),updatedAt:(0,v.Bt)()}):e.set(s,{items:[t],equipped:{},updatedAt:(0,v.Bt)()}),{success:!0})})}catch(e){return{success:!1,error:"Transaction failed"}}},equipItem:async(e,t)=>{let a=await (0,b.xI)();if(!a)return{success:!1,error:"Database not available"};let r=(0,v.JU)(a,w,t),i=await (0,v.QT)(r);if(!i.exists())return{success:!1,error:"Item not found"};let s=i.data();if(!(await N.getUserInventory(e)).items.includes(t))return{success:!1,error:"Item not owned"};let c=(0,v.JU)(a,k,e);return await (0,v.r7)(c,{["equipped.".concat(s.category)]:t,updatedAt:(0,v.Bt)()}),{success:!0}},unequipItem:async(e,t)=>{let a=await (0,b.xI)();if(!a)return;let r=(0,v.JU)(a,k,e);await (0,v.r7)(r,{["equipped.".concat(t)]:null,updatedAt:(0,v.Bt)()})}};var C=a(6895);let P={UserCircle:c,Bot:n.Z,Palette:l,Star:o.Z,Flame:d,Crown:u.Z,Zap:p.Z,Clover:m},I=[{id:"all",label:"All"},{id:"avatar",label:"Avatars"},{id:"theme",label:"Themes"},{id:"badge",label:"Badges"},{id:"powerup",label:"Power-ups"}],U={common:"border-white/[0.08]",rare:"border-accent-border",epic:"border-violet/30",legendary:"border-warning/30"},A={common:"text-muted-foreground",rare:"text-accent",epic:"text-violet",legendary:"text-warning"};function S(){let{user:e}=(0,g.a)(),[t,a]=(0,i.useState)("all"),[s,n]=(0,i.useState)([]),[l,o]=(0,i.useState)({items:[],equipped:{}}),[d,u]=(0,i.useState)(null),[p,m]=(0,i.useState)(!0),[v,b]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{m(!0);try{let t=await N.getShopItems();if(n(t),e){let t=await N.getUserInventory(e.id);o(t);let a=await C.v.getUserStats(e.id);u(a)}}catch(e){}finally{m(!1)}})()},[e]);let w=async t=>{if(e){b(t.id);try{let a=await N.purchaseItem(e.id,t.id);a.success?(o(e=>({...e,items:[...e.items,t.id]})),u(e=>e?{...e,coins:e.coins-t.price}:null)):alert(a.error||"Purchase failed")}catch(e){}finally{b(null)}}},k=async t=>{if(e)try{(await N.equipItem(e.id,t.id)).success&&o(e=>({...e,equipped:{...e.equipped,[t.category]:t.id}}))}catch(e){}},j="all"===t?s:s.filter(e=>e.category===t),S=(null==d?void 0:d.coins)||0;return p?(0,r.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,r.jsx)("h1",{className:"font-display text-2xl font-bold uppercase tracking-wider text-primary",children:"Item Shop"}),(0,r.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"Loading shop..."})]}):(0,r.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"font-display text-2xl font-bold uppercase tracking-wider text-primary mb-2",children:"Item Shop"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:e?"Customize your profile with exclusive items":"Sign in to purchase items"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 bg-elevated border border-white/[0.08] px-4 py-2",children:[(0,r.jsx)(x.Z,{className:"w-5 h-5 text-warning"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-mono font-bold text-primary",children:S.toLocaleString()}),(0,r.jsx)("p",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:"Coins"})]})]})]}),(0,r.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2",children:I.map(e=>(0,r.jsx)("button",{onClick:()=>a(e.id),className:(0,y.cn)("px-4 py-2 text-xs font-medium uppercase tracking-wider whitespace-nowrap transition-colors",t===e.id?"bg-elevated border border-accent-border text-accent":"bg-transparent border border-transparent text-muted-foreground hover:text-primary"),children:e.label},e.id))}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:j.map(t=>{let a=P[t.icon]||c,i=l.items.includes(t.id),s=l.equipped[t.category]===t.id,n=S>=t.price;return(0,r.jsxs)("div",{className:(0,y.cn)("bg-elevated border p-4 transition-all",s?"border-success/30 bg-success/5":i?"border-accent/30":U[t.rarity]),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsx)("div",{className:(0,y.cn)("w-16 h-16 border flex items-center justify-center",s?"bg-success/10 border-success/30":"bg-surface border-white/[0.08]"),children:(0,r.jsx)(a,{className:(0,y.cn)("w-8 h-8",s?"text-success":A[t.rarity])})}),(0,r.jsxs)("div",{className:"text-right",children:[s&&(0,r.jsxs)("div",{className:"flex items-center gap-1 text-success text-xs",children:[(0,r.jsx)(h.Z,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:"Equipped"})]}),!s&&i&&(0,r.jsx)("span",{className:"text-xs text-accent uppercase tracking-wider",children:"Owned"}),(0,r.jsx)("span",{className:(0,y.cn)("text-[10px] uppercase tracking-wider block mt-1",A[t.rarity]),children:t.rarity})]})]}),(0,r.jsx)("h3",{className:"font-display text-sm font-bold uppercase tracking-wide text-primary mb-1",children:t.name}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mb-4",children:t.description}),(0,r.jsx)("div",{className:"flex items-center justify-between",children:i?s?(0,r.jsx)("span",{className:"text-xs text-success uppercase tracking-wider",children:"Active"}):(0,r.jsx)(f.z,{size:"sm",variant:"outline",onClick:()=>k(t),children:"Equip"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4 text-warning"}),(0,r.jsx)("span",{className:(0,y.cn)("font-mono font-bold",n?"text-primary":"text-danger"),children:t.price})]}),(0,r.jsx)(f.z,{size:"sm",disabled:!e||!n||v===t.id,onClick:()=>w(t),children:v===t.id?"...":"Buy"})]})})]},t.id)})}),(0,r.jsxs)("div",{className:"bg-elevated border border-white/[0.06] p-4 mt-8",children:[(0,r.jsx)("h3",{className:"font-display text-sm font-bold uppercase tracking-wider text-primary mb-2",children:"How to Earn Coins"}),(0,r.jsxs)("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"w-1 h-1 bg-accent rounded-full"}),"Play games and achieve high scores"]}),(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"w-1 h-1 bg-accent rounded-full"}),"Complete daily challenges"]}),(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"w-1 h-1 bg-accent rounded-full"}),"Level up your profile"]}),(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"w-1 h-1 bg-accent rounded-full"}),"Unlock achievements"]})]})]})]})}},2869:function(e,t,a){"use strict";a.d(t,{z:function(){return c}});var r=a(7437),i=a(2265),s=a(4508);let c=i.forwardRef((e,t)=>{let{className:a,variant:i="default",size:c="default",isLoading:n=!1,children:l,...o}=e;return(0,r.jsx)("button",{className:(0,s.cn)("inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium uppercase tracking-wider transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-accent disabled:pointer-events-none disabled:opacity-50",{default:"bg-accent-dim border border-accent-border text-accent hover:bg-accent/20 hover:border-accent",primary:"bg-accent text-background hover:bg-accent/90 border border-accent",secondary:"bg-elevated border border-white/[0.08] text-primary hover:bg-raised hover:border-white/[0.12]",ghost:"hover:bg-elevated hover:text-primary text-muted-foreground",danger:"bg-danger/10 border border-danger/30 text-danger hover:bg-danger/20 hover:border-danger/50",outline:"border border-white/[0.08] bg-transparent hover:bg-elevated hover:text-primary"}[i],{default:"h-9 px-4 py-2",sm:"h-8 px-3 text-xs",lg:"h-11 px-8 text-base",icon:"h-9 w-9"}[c],n&&"opacity-70 cursor-wait",a),ref:t,disabled:o.disabled||n,...o,children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):l})});c.displayName="Button"},6895:function(e,t,a){"use strict";a.d(t,{v:function(){return c}});var r=a(5978),i=a(4257);let s="users",c={getUserStats:async e=>{let t=await (0,i.xI)();if(!t)return{totalScore:0,gamesPlayed:0,totalPlayTime:0,achievementsUnlocked:0,coins:0,level:1,xp:0,lastPlayed:new Date};let a=(0,r.JU)(t,s,e),c=await (0,r.QT)(a);if(c.exists()){var n;let e=c.data();return{totalScore:e.totalScore||0,gamesPlayed:e.gamesPlayed||0,totalPlayTime:e.totalPlayTime||0,achievementsUnlocked:e.achievementsUnlocked||0,coins:e.coins||0,level:e.level||1,xp:e.xp||0,lastPlayed:(null===(n=e.lastPlayed)||void 0===n?void 0:n.toDate())||new Date}}let l={totalScore:0,gamesPlayed:0,totalPlayTime:0,achievementsUnlocked:0,coins:0,level:1,xp:0,lastPlayed:new Date};return await (0,r.pl)(a,{...l,createdAt:(0,r.Bt)(),updatedAt:(0,r.Bt)()}),l},updateAfterGame:async(e,t,a)=>{let n=await (0,i.xI)();if(!n)return;let l=(0,r.JU)(n,s,e);await (0,r.r7)(l,{totalScore:(0,r.nP)(t),gamesPlayed:(0,r.nP)(1),totalPlayTime:(0,r.nP)(a),xp:(0,r.nP)(Math.max(1,Math.floor(t/100))),lastPlayed:(0,r.Bt)(),updatedAt:(0,r.Bt)()}),await c.checkLevelUp(e)},checkLevelUp:async e=>{let t=await (0,i.xI)();if(!t)return;let a=(0,r.JU)(t,s,e),c=await (0,r.QT)(a);if(!c.exists())return;let n=c.data(),l=n.level||1,o=n.xp||0,d=100*l;if(o>=d){let e=l+1;await (0,r.r7)(a,{level:e,xp:o-d,coins:(0,r.nP)(50*e),updatedAt:(0,r.Bt)()})}},addCoins:async(e,t)=>{let a=await (0,i.xI)();if(!a)return;let c=(0,r.JU)(a,s,e);await (0,r.r7)(c,{coins:(0,r.nP)(t),updatedAt:(0,r.Bt)()})},spendCoins:async(e,t)=>{let a=await (0,i.xI)();if(!a)return!1;let c=(0,r.JU)(a,s,e),n=await (0,r.QT)(c);return!!n.exists()&&!((n.data().coins||0)<t)&&(await (0,r.r7)(c,{coins:(0,r.nP)(-t),updatedAt:(0,r.Bt)()}),!0)},incrementAchievements:async e=>{let t=await (0,i.xI)();if(!t)return;let a=(0,r.JU)(t,s,e);await (0,r.r7)(a,{achievementsUnlocked:(0,r.nP)(1),updatedAt:(0,r.Bt)()})}}},2222:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},401:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},9232:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]])},8617:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]])},6595:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},1239:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])}},function(e){e.O(0,[358,533,24,30,971,117,744],function(){return e(e.s=9849)}),_N_E=e.O()}]);