(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[320],{4380:function(e,a,t){Promise.resolve().then(t.bind(t,3828))},3828:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return v}});var r=t(7437),s=t(2265),i=t(284),n=t(9474),c=t(8896),d=t(8617),l=t(6595),o=t(1239),m=t(6142);let u=(0,t(9763).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var p=t(3327),x=t(4508),h=t(8079),g=t(8818);let y={Gamepad2:i.Z,Trophy:n.Z,Target:c.Z,Crown:d.Z,Star:l.Z,Zap:o.Z,Medal:m.Z},f={common:"border-white/[0.08] bg-elevated",rare:"border-accent-border bg-accent-dim",epic:"border-violet/30 bg-violet/10",legendary:"border-warning/30 bg-warning/10"},w={common:"text-muted-foreground",rare:"text-accent",epic:"text-violet",legendary:"text-warning"};function v(){let{user:e}=(0,h.a)(),[a,t]=(0,s.useState)([]),[i,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{c(!0);try{let a=await g.c.getAllAchievements(),r=e?await g.c.getUserAchievements(e.id):[],s=a.map(e=>{let a=r.find(a=>a.achievementId===e.id);return{...e,achievementId:e.id,progress:(null==a?void 0:a.progress)||0,unlocked:(null==a?void 0:a.unlocked)||!1,unlockedAt:null==a?void 0:a.unlockedAt}});t(s)}catch(e){}finally{c(!1)}})()},[e]);let d=a.filter(e=>e.unlocked).length,l=a.length,o=l>0?Math.round(d/l*100):0;return i?(0,r.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsx)("h1",{className:"font-display text-2xl font-bold uppercase tracking-wider text-primary",children:"Achievements"})}),(0,r.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"Loading achievements..."})]}):(0,r.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"font-display text-2xl font-bold uppercase tracking-wider text-primary mb-2",children:"Achievements"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:e?"Unlock badges by playing games":"Sign in to track your progress"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"font-display text-3xl font-bold text-accent",children:[d,"/",l]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Unlocked"})]})]}),(0,r.jsxs)("div",{className:"bg-elevated border border-white/[0.06] p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mb-2",children:[(0,r.jsx)("span",{children:"Progress"}),(0,r.jsxs)("span",{children:[o,"%"]})]}),(0,r.jsx)("div",{className:"h-2 bg-surface overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-accent transition-all duration-500",style:{width:"".concat(o,"%")}})})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(e=>{let a=y[e.icon]||n.Z,t=Math.min(100,e.progress/e.maxProgress*100);return(0,r.jsxs)("div",{className:(0,x.cn)("relative border p-4 transition-all",e.unlocked?f[e.rarity]:"border-white/[0.06] bg-elevated opacity-60"),children:[!e.unlocked&&(0,r.jsx)("div",{className:"absolute top-2 right-2",children:(0,r.jsx)(u,{className:"w-4 h-4 text-muted-foreground"})}),e.unlocked&&(0,r.jsx)("div",{className:"absolute top-2 right-2",children:(0,r.jsx)(p.Z,{className:"w-4 h-4 text-accent"})}),(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:(0,x.cn)("w-12 h-12 flex items-center justify-center border",e.unlocked?"border-current":"border-white/[0.08]"),children:(0,r.jsx)(a,{className:(0,x.cn)("w-6 h-6",e.unlocked?w[e.rarity]:"text-muted-foreground")})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[(0,r.jsx)("h3",{className:"font-display text-sm font-bold uppercase tracking-wide text-primary",children:e.name}),(0,r.jsx)("span",{className:(0,x.cn)("text-[10px] uppercase tracking-wider",w[e.rarity]),children:e.rarity})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mb-3",children:e.description}),e.unlocked&&(0,r.jsxs)("div",{className:"flex gap-3 mb-3 text-xs",children:[(0,r.jsxs)("span",{className:"text-accent",children:["+",e.xpReward," XP"]}),(0,r.jsxs)("span",{className:"text-yellow-400",children:["+",e.coinReward," Coins"]})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,r.jsxs)("span",{className:"text-muted-foreground",children:[e.progress.toLocaleString(),"/",e.maxProgress.toLocaleString()]}),(0,r.jsxs)("span",{className:e.unlocked?"text-accent":"text-muted-foreground",children:[Math.round(t),"%"]})]}),(0,r.jsx)("div",{className:"h-1 bg-surface overflow-hidden",children:(0,r.jsx)("div",{className:(0,x.cn)("h-full transition-all duration-500",e.unlocked?"bg-accent":"bg-white/20"),style:{width:"".concat(t,"%")}})})]})]})]})]},e.id)})})]})}},8818:function(e,a,t){"use strict";t.d(a,{c:function(){return d}});var r=t(5978),s=t(4257);let i="achievements",n="userAchievements",c=[{id:"first-game",name:"First Steps",description:"Play your first game",icon:"Gamepad2",maxProgress:1,rarity:"common",xpReward:25,coinReward:10},{id:"score-1000",name:"Score Hunter",description:"Score 1,000 points in any game",icon:"Trophy",maxProgress:1e3,rarity:"common",xpReward:50,coinReward:25},{id:"score-10000",name:"High Scorer",description:"Score 10,000 points in any game",icon:"Trophy",maxProgress:1e4,rarity:"rare",xpReward:100,coinReward:50},{id:"play-10-games",name:"Dedicated Player",description:"Play 10 games",icon:"Target",maxProgress:10,rarity:"common",xpReward:50,coinReward:25},{id:"play-50-games",name:"Veteran",description:"Play 50 games",icon:"Target",maxProgress:50,rarity:"rare",xpReward:150,coinReward:75},{id:"play-100-games",name:"Arcade Addict",description:"Play 100 games",icon:"Target",maxProgress:100,rarity:"epic",xpReward:300,coinReward:150},{id:"all-games",name:"Explorer",description:"Play every game in the hub",icon:"Sparkles",maxProgress:8,rarity:"rare",xpReward:100,coinReward:50},{id:"top-10",name:"Top 10",description:"Reach top 10 on any leaderboard",icon:"Medal",maxProgress:1,rarity:"epic",xpReward:200,coinReward:100},{id:"master",name:"Arcade Master",description:"Unlock all other achievements",icon:"Crown",maxProgress:8,rarity:"legendary",xpReward:1e3,coinReward:500}],d={initializeAchievements:async()=>{let e=await (0,s.xI)();if(!e)return;let a=(0,r.hJ)(e,i);for(let e of c){let t=(0,r.JU)(a,e.id);(await (0,r.QT)(t)).exists()||await (0,r.pl)(t,e)}},getAllAchievements:async()=>{let e=await (0,s.xI)();if(!e)return c;let a=(0,r.hJ)(e,i),t=await (0,r.PL)(a);return t.empty?(await d.initializeAchievements(),c):t.docs.map(e=>({id:e.id,...e.data()}))},getUserAchievements:async e=>{let a=await (0,s.xI)();if(!a)return[];let t=(0,r.hJ)(a,n),i=(0,r.IO)(t,(0,r.ar)("userId","==",e));return(await (0,r.PL)(i)).docs.map(e=>{var a;return{achievementId:e.data().achievementId,progress:e.data().progress||0,unlocked:e.data().unlocked||!1,unlockedAt:null===(a=e.data().unlockedAt)||void 0===a?void 0:a.toDate()}})},updateProgress:async(e,a,t)=>{let c=await (0,s.xI)();if(!c)return!1;let d=(0,r.JU)(c,i,a),l=await (0,r.QT)(d);if(!l.exists())return!1;let o=l.data(),m=(0,r.JU)(c,n,"".concat(e,"_").concat(a)),u=await (0,r.QT)(m);if(t<=(u.exists()&&u.data().progress||0))return!1;let p=Math.min(t,o.maxProgress),x=p>=o.maxProgress;return await (0,r.pl)(m,{userId:e,achievementId:a,progress:p,unlocked:x,unlockedAt:x?(0,r.Bt)():null,updatedAt:(0,r.Bt)()}),x},trackGamePlayed:async(e,a,t)=>{var i;let c=await (0,s.xI)();if(!c)return;await d.updateProgress(e,"first-game",1),await d.updateProgress(e,"score-1000",t),await d.updateProgress(e,"score-10000",t);let l=(0,r.hJ)(c,n),o=(0,r.IO)(l,(0,r.ar)("userId","==",e)),m=(await (0,r.PL)(o)).docs.filter(e=>"first-game"===e.data().achievementId&&e.data().progress>0).length;await d.updateProgress(e,"play-10-games",m),await d.updateProgress(e,"play-50-games",m),await d.updateProgress(e,"play-100-games",m);let u=(0,r.IO)(l,(0,r.ar)("userId","==",e),(0,r.ar)("achievementId","==","all-games")),p=(null===(i=(await (0,r.PL)(u)).docs[0])||void 0===i?void 0:i.data().gamesPlayed)||[];if(!p.includes(a)){p.push(a),await d.updateProgress(e,"all-games",p.length);let t=(0,r.JU)(c,n,"".concat(e,"_all-games"));await (0,r.pl)(t,{gamesPlayed:p},{merge:!0})}}}},3327:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(9763).Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},8617:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(9763).Z)("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]])},284:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(9763).Z)("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]])},6142:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(9763).Z)("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]])},6595:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(9763).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},8896:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(9763).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},9474:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(9763).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},1239:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(9763).Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])}},function(e){e.O(0,[358,533,24,30,971,117,744],function(){return e(e.s=4380)}),_N_E=e.O()}]);