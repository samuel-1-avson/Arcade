(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{3655:function(e,r,t){Promise.resolve().then(t.t.bind(t,7960,23)),Promise.resolve().then(t.bind(t,4426))},4426:function(e,r,t){"use strict";t.d(r,{Providers:function(){return U}});var a=t(7437),n=t(3427),s=t(9827),i=t(2265),o=t(4887),c=t(8614),l=t(521),d=t(5302),u=t(2252),m=t(3245),h=t(2489),g=t(4508);let f=i.createContext(void 0);function b(e){let{children:r}=e,[t,n]=i.useState([]),[s,o]=i.useState(!1);i.useEffect(()=>{o(!0)},[]);let c=i.useCallback(e=>{let r=Math.random().toString(36).substring(2,9);n(t=>[...t,{...e,id:r}]),0!==e.duration&&setTimeout(()=>{l(r)},e.duration||5e3)},[]),l=i.useCallback(e=>{n(r=>r.filter(r=>r.id!==e))},[]);return(0,a.jsxs)(f.Provider,{value:{toasts:t,addToast:c,removeToast:l},children:[r,s&&(0,a.jsx)(p,{toasts:t,onRemove:l})]})}function p(e){let{toasts:r,onRemove:t}=e;return(0,o.createPortal)((0,a.jsx)("div",{className:"fixed top-4 right-4 z-[100] flex flex-col gap-2",children:(0,a.jsx)(c.M,{children:r.map(e=>(0,a.jsx)(v,{toast:e,onRemove:t},e.id))})}),document.body)}let x={success:d.Z,error:u.Z,info:m.Z,warning:u.Z},y={success:"border-l-success bg-success/10",error:"border-l-danger bg-danger/10",info:"border-l-accent bg-accent/10",warning:"border-l-warning bg-warning/10"};function v(e){let{toast:r,onRemove:t}=e,n=x[r.type];return(0,a.jsx)(l.E.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100},className:(0,g.cn)("relative min-w-[300px] max-w-md bg-elevated border border-white/[0.08] border-l-4 p-4 shadow-lg",y[r.type]),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(n,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-medium text-sm text-primary",children:r.title}),r.message&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:r.message})]}),(0,a.jsx)("button",{onClick:()=>t(r.id),className:"text-muted-foreground hover:text-primary transition-colors",children:(0,a.jsx)(h.Z,{className:"w-4 h-4"})})]})})}var w=t(3639),j=t(7168),N=t(2869);class P extends i.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("Uncaught error:",e,r)}render(){return this.state.hasError?this.props.fallback||(0,a.jsx)("div",{className:"min-h-[400px] flex items-center justify-center p-6",children:(0,a.jsxs)("div",{className:"bg-elevated border border-danger/30 p-8 max-w-md w-full text-center",children:[(0,a.jsx)(w.Z,{className:"w-12 h-12 text-danger mx-auto mb-4"}),(0,a.jsx)("h2",{className:"font-display text-lg font-bold uppercase tracking-wider text-primary mb-2",children:"Something Went Wrong"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-6",children:"We apologize for the inconvenience. Please try refreshing the page."}),(0,a.jsxs)(N.z,{onClick:()=>{this.setState({hasError:!1}),window.location.reload()},children:[(0,a.jsx)(j.Z,{className:"w-4 h-4 mr-2"}),"Reload Page"]})]})}):this.props.children}constructor(...e){super(...e),this.state={hasError:!1}}}var I=t(3820),S=t(4257),k=t(4752);function L(e){let{children:r}=e,{setUser:t,setLoading:n}=(0,I.tN)(),[s,o]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{let e=null;return(async()=>{n(!0);let r=await (0,S.yL)();if(!r){n(!1),o(!0);return}e=(0,k.Aj)(r,e=>{e?t({id:e.uid,email:e.email||"",displayName:e.displayName||"Guest",avatar:e.photoURL||"/avatars/default.png",level:1,xp:0,totalScore:0,gamesPlayed:0,createdAt:new Date,preferences:{soundEnabled:!0,musicEnabled:!0,notificationsEnabled:!0,theme:"dark"}}):t(null),n(!1),o(!0)})})(),()=>{e&&e()}},[t,n]),s)?(0,a.jsx)(a.Fragment,{children:r}):(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-12 h-12 border-2 border-accent border-t-transparent rounded-full animate-spin"})})}function U(e){let{children:r}=e,[t]=(0,i.useState)(()=>new n.S({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1,retry:1}}}));return(0,a.jsx)(P,{children:(0,a.jsx)(s.aH,{client:t,children:(0,a.jsx)(b,{children:(0,a.jsx)(L,{children:r})})})})}},2869:function(e,r,t){"use strict";t.d(r,{z:function(){return i}});var a=t(7437),n=t(2265),s=t(4508);let i=n.forwardRef((e,r)=>{let{className:t,variant:n="default",size:i="default",isLoading:o=!1,children:c,...l}=e;return(0,a.jsx)("button",{className:(0,s.cn)("inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium uppercase tracking-wider transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-accent disabled:pointer-events-none disabled:opacity-50",{default:"bg-accent-dim border border-accent-border text-accent hover:bg-accent/20 hover:border-accent",primary:"bg-accent text-background hover:bg-accent/90 border border-accent",secondary:"bg-elevated border border-white/[0.08] text-primary hover:bg-raised hover:border-white/[0.12]",ghost:"hover:bg-elevated hover:text-primary text-muted-foreground",danger:"bg-danger/10 border border-danger/30 text-danger hover:bg-danger/20 hover:border-danger/50",outline:"border border-white/[0.08] bg-transparent hover:bg-elevated hover:text-primary"}[n],{default:"h-9 px-4 py-2",sm:"h-8 px-3 text-xs",lg:"h-11 px-8 text-base",icon:"h-9 w-9"}[i],o&&"opacity-70 cursor-wait",t),ref:r,disabled:l.disabled||o,...l,children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):c})});i.displayName="Button"},4257:function(e,r,t){"use strict";t.d(r,{xI:function(){return h},yL:function(){return m}});var a=t(738),n=t(4752),s=t(5978);t(6834);let i={apiKey:"AIzaSyCumtfvMCnSRXMHtOghgLv87PdvmwD3yjA".trim(),authDomain:"arcade-7f03c.firebaseapp.com".trim(),projectId:"arcade-7f03c".trim(),storageBucket:"arcade-7f03c.firebasestorage.app".trim(),messagingSenderId:"883884342768".trim(),appId:"1:883884342768:web:8c6a43c1c3c01790d2f135".trim(),measurementId:"G-NCQBGH5RR3".trim()},o=null,c=null,l=null,d=null;async function u(){return o&&c?{app:o,auth:c,db:l}:d||(d=(async()=>{try{if(0===(0,a.C6)().length){if(!i.apiKey||"undefined"===i.apiKey)return{app:null,auth:null,db:null};o=(0,a.ZF)(i)}else o=(0,a.C6)()[0];return c=(0,n.v0)(o),await (0,n.Fb)(c,n.a$),l=(0,s.ad)(o),{app:o,auth:c,db:l}}catch(e){return{app:null,auth:null,db:null}}})())}async function m(){if(c)return c;let{auth:e}=await u();return e}async function h(){if(l)return l;let{db:e}=await u();return e}},3820:function(e,r,t){"use strict";t.d(r,{tN:function(){return s},gT:function(){return i},Pl:function(){return m},ev:function(){return o}});var a=t(9625),n=t(6885);let s=(0,a.Ue)()((0,n.tJ)(e=>({user:null,isLoading:!0,isAuthenticated:!1,setUser:r=>e({user:r,isAuthenticated:!!r,isLoading:!1}),setLoading:r=>e({isLoading:r}),signOut:()=>e({user:null,isAuthenticated:!1,isLoading:!1}),updateProfile:r=>e(e=>({user:e.user?{...e.user,...r}:null})),updatePreferences:r=>e(e=>({user:e.user?{...e.user,preferences:{...e.user.preferences,...r}}:null}))}),{name:"auth-storage",partialize:e=>({user:e.user})})),i=(0,a.Ue)()(e=>({games:[],filter:"all",highScores:{},setGames:r=>e({games:r}),setFilter:r=>e({filter:r}),setHighScore:(r,t)=>e(e=>({highScores:{...e.highScores,[r]:Math.max(e.highScores[r]||0,t)}}))})),o=(0,a.Ue)()((e,r)=>({currentParty:null,isInParty:!1,messages:[],isDrawerOpen:!1,createParty:async()=>{let r=Math.random().toString(36).substring(2,8).toUpperCase();e({currentParty:{id:crypto.randomUUID(),code:r,hostId:"current-user",members:[],status:"waiting",createdAt:new Date},isInParty:!0})},joinParty:async e=>{},leaveParty:()=>{e({currentParty:null,isInParty:!1,messages:[]})},sendMessage:t=>{let{currentParty:a}=r();if(!a)return;let n={id:crypto.randomUUID(),userId:"current-user",displayName:"You",text:t,timestamp:new Date};e(e=>({messages:[...e.messages,n]}))},addMember:r=>{e(e=>({currentParty:e.currentParty?{...e.currentParty,members:[...e.currentParty.members,r]}:null}))},removeMember:r=>{e(e=>({currentParty:e.currentParty?{...e.currentParty,members:e.currentParty.members.filter(e=>e.userId!==r)}:null}))},setDrawerOpen:r=>e({isDrawerOpen:r})}));var c=t(5978),l=t(4257);let d="userStats",u={getLeaderboard:async function(e){let r,t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=arguments.length>2?arguments[2]:void 0,s=await (0,l.xI)();if(!s)throw Error("Firebase not initialized");let i=(0,c.hJ)(s,d);r="global"===e?n?(0,c.IO)(i,(0,c.Xo)("bestScore","desc"),(0,c.TQ)(n),(0,c.b9)(a)):(0,c.IO)(i,(0,c.Xo)("bestScore","desc"),(0,c.b9)(a)):n?(0,c.IO)(i,(0,c.ar)("gameId","==",e),(0,c.Xo)("bestScore","desc"),(0,c.TQ)(n),(0,c.b9)(a)):(0,c.IO)(i,(0,c.ar)("gameId","==",e),(0,c.Xo)("bestScore","desc"),(0,c.b9)(a));let o=await (0,c.PL)(r),u=Array.from(new Set(o.docs.map(e=>e.data().userId))),m={};for(let e=0;e<u.length;e+=10){let r=u.slice(e,e+10),t=(0,c.IO)((0,c.hJ)(s,"users"),(0,c.ar)("__name__","in",r));(await (0,c.PL)(t)).docs.forEach(e=>{let r=e.data();m[e.id]={displayName:r.displayName||"Anonymous",avatar:r.avatar||"User",photoURL:r.photoURL}})}let h=[],g=1;for(let e of o.docs){var f;let r=e.data(),a=m[r.userId]||{displayName:"Anonymous",avatar:"User"};h.push({rank:n?g+50:g,userId:r.userId,displayName:a.displayName,avatar:a.avatar,photoURL:a.photoURL,score:r.bestScore,timestamp:(null===(f=r.lastPlayed)||void 0===f?void 0:f.toDate())||new Date}),g++,t=r.bestScore}return{entries:h,lastScore:t}},getUserRank:async(e,r)=>{let t;let a=await (0,l.xI)();if(!a)throw Error("Firebase not initialized");let n=(0,c.hJ)(a,d);t="global"===r?(0,c.IO)(n,(0,c.Xo)("bestScore","desc")):(0,c.IO)(n,(0,c.ar)("gameId","==",r),(0,c.Xo)("bestScore","desc"));let s=await (0,c.PL)(t),i=1;for(let r of s.docs){if(r.data().userId===e)return i;i++}return null}},m=(0,a.Ue)()(e=>({entries:[],currentUserRank:null,selectedGame:"global",isLoading:!1,error:null,setEntries:r=>e({entries:r}),setCurrentUserRank:r=>e({currentUserRank:r}),setSelectedGame:r=>e({selectedGame:r}),setIsLoading:r=>e({isLoading:r}),fetchLeaderboard:async(r,t)=>{e({isLoading:!0,error:null});try{let a=await u.getLeaderboard(r,50);if(e({entries:a.entries,isLoading:!1}),t){let a=await u.getUserRank(t,r);e({currentUserRank:a})}}catch(r){e({error:"Failed to load leaderboard",isLoading:!1,entries:[]})}}}))},4508:function(e,r,t){"use strict";t.d(r,{cn:function(){return s}});var a=t(1994),n=t(3335);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.m6)((0,a.W)(r))}},7960:function(){}},function(e){e.O(0,[587,358,533,24,844,250,971,117,744],function(){return e(e.s=3655)}),_N_E=e.O()}]);